http://www.zhufengpeixun.com/ts-lesson/guide/typescript-1.html

## 1.1 interface èµ‹å€¼å…¼å®¹æ€§é—®é¢˜

```ts
interface Person {
  name: string;
  age: number;
}
// æˆ‘ä»¬æŠŠä¸€ä¸ªå€¼ï¼Œèµ‹å€¼ç»™å¦ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ˜¯å£°æ˜å¿…é¡»ä¸€è‡´

let obj:Person = {
  name: '123',
  age: 123,
  // sex: 'male', // error å¯¹è±¡å­—é¢é‡åªèƒ½æŒ‡å®šå·²çŸ¥å±æ€§ï¼Œå¹¶ä¸”â€œsexâ€ä¸åœ¨ç±»å‹â€œPersonâ€ä¸­
}

// å¦‚ä½•è§£å†³

let obj1 = {
  name: '123',
  age: 123,
  sex: 'male'
}
// èµ‹å€¼çš„æ—¶å€™ä¼šäº§ç”Ÿå…¼å®¹æ€§ï¼Œå­å¯ä»¥èµ‹å€¼ç»™çˆ¶äº²
let obj2: Person = obj1; // ok 
```

## 1.2 interface å’Œ typeçš„åŒºåˆ«ï¼Ÿ

**ä¸€èˆ¬åœºæ™¯ä¸‹æˆ‘ä»¬ä½¿ç”¨ interface ç”¨æ¥æè¿°å¯¹è±¡ã€ç±»çš„ç»“æ„ã€‚ä½¿ç”¨ç±»å‹åˆ«åæ¥æè¿°å‡½æ•°ç­¾åã€è”åˆç±»å‹ã€å·¥å…·ç±»å‹ã€ æ˜ å°„ç±»å‹ã€‚**

- **type å¯ä»¥ç”¨è”åˆç±»å‹ `type xx = string | number`ï¼Œ interface ä¸èƒ½ç”¨è”åˆç±»å‹**
- **type åˆ«åä¸èƒ½è¢«æ‰©å±•ï¼ˆç»§æ‰¿ï¼‰ï¼Œinterface å¯ä»¥è¢«ç»§æ‰¿å’Œå®ç°**
- **type ä¸èƒ½é‡åï¼Œ interface å¯ä»¥é‡åï¼ˆä¼šåˆå¹¶ï¼‰**
- **type å¯ä»¥åšå¾ªç¯å’Œæ¡ä»¶ï¼Œinterface ä¸è¡Œ**

## 1.3 ç±»æ¥å£

**è¿™é‡Œå…ˆæ¥å¼ºè°ƒä¸€ä¸‹æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«,æŠ½è±¡ç±»ä¸­å¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•å®ç°ï¼Œæ¥å£ä¸­ä¸èƒ½åŒ…å«å®ç°ã€‚**

```ts
interface Speakable {
  name: string;
  speak(): void;
}
// è¿™é‡Œä¸åŒºåˆ†æ˜¯å®ä¾‹çš„æ–¹æ³•è¿˜æ˜¯åŸå‹çš„æ–¹æ³•
interface ChineseSpeakable {
  // speakChinese:()=>void
  speakChinese(): void; // ä¸€èˆ¬é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼ä¸è¿›è¡Œé€†å˜æ£€æµ‹
}
class Speak implements Speakable, ChineseSpeakable {
  name!: string;
  speak() {}
  speakChinese() {}
}
```

> ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œåœ¨ç±»ä¸­å¿…é¡»å®ç°æ¥å£ä¸­çš„æ–¹æ³•å’Œå±æ€§ã€‚

## 1.4 æ„é€ å‡½æ•°ç±»å‹

```ts
interface Clazz {
  new (name: string): any;
}
// type IClazz = new ()=> any
function createClass(target: Clazz, name: string) {
  return new target(name); // ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°
}
class Animal {
  constructor(public name: string) {
    this.name = name;
  }
}
let r = createClass(Animal, "Tom");
```

> è¿™é‡Œæ— æ³•æ ‡è¯†è¿”å›å€¼ç±»å‹ã€‚

```ts
interface Clazz<T> {
  new (name: string): T;
}
function createClass<T>(target: Clazz<T>, name: string): T {
  return new target(name);
}
class Animal {
  constructor(public name: string) {
    this.name = name;
  }
}
let r = createClass(Animal, "Tom");

```

**new() è¡¨ç¤ºå½“å‰æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ç±»å‹,è¿™é‡Œæå¸¦ä½¿ç”¨äº†ä¸‹æ³›å‹ã€‚ åœ¨ä½¿ç”¨`createClass`æ—¶åŠ¨æ€ä¼ å…¥ç±»å‹**

## 1.5 æ³›å‹ä½¿ç”¨çš„ä½ç½®

```ts

const myForEach = <T>(s: T[], cb: (val: T) => void) => {

}
myForEach(['1', 2], function(val) {
  // è¿™é‡Œä¼šè‡ªåŠ¨æ¨èvalçš„ç±»å‹ä¸º: string | number
  console.log(val);
})
// åœ¨ä½¿ç”¨å‡½æ•°çš„æ—¶å€™æ‰ä¼šæ¨æ–­ç±»å‹ï¼Œè€Œä¸æ˜¯å®šä¹‰æ¥å£çš„æ—¶å€™ä¼ é€’ç±»å‹
interface Foreach {
  <T>(arr: T[], cb: (val: T) => void ): void;
}
// æˆ–
type TForeach = <T>(arr: T[], cb: (val: T) => void ) => void;
const myForEach1:Foreach = (array, cb) => {
  for (let index = 0; index < array.length; index++) {
    const element = array[index];
    cb(element);
  }
}
myForEach1(['12', 1], function(val) {
  console.log(val);
})

```

**æ¥ä¸‹æ¥æŠŠå‡½æ•°ç±»å‹è¿›è¡Œæå–å°è£…**

```ts
// type ICallback = <T>(item: T, index: number) => void; âé”™è¯¯å†™æ³•ï¼Œè¿™æ ·å†™æ„å‘³ç€è°ƒç”¨å‡½æ•°çš„æ—¶å€™ç¡®å®šæ³›å‹
type ICallback<T> = (item: T, index: number) => void;
type IForEach = <T>(arr: T[], callback: ICallback<T>) => void;

const forEach: IForEach = (arr, callback) => {
  for (let i = 0; i < arr.length; i++) {
    callback(arr[i], i); // ts ç±»å‹æ£€æµ‹ æ­¤æ—¶ä¸ä¼šæ‰§è¡Œä»£ç ã€‚
  }
};
forEach([1, 2, "a", "b"], function (item) {
  console.log(item);
});
```

**`type ICallback = <T>(val: T) => void;`**
 **ç›¸å½“äºè¯´ï¼šã€Œè¿™ä¸ªå‡½æ•°æ¯æ¬¡è‡ªå·±å†³å®šå‚æ•°ç±»å‹æ˜¯ä»€ä¹ˆã€**

**`type ICallback<T> = (val: T) => void;`**
 **ç›¸å½“äºè¯´ï¼šã€Œä½ å‘Šè¯‰æˆ‘ç±»å‹ï¼Œæˆ‘ç…§ç€æ¥ã€**

### 1.5.1**TypeScript çš„ç±»å‹æ¨å¯¼åªå‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µ**ï¼ˆç¼–è¯‘æœŸç±»å‹ç³»ç»Ÿï¼‰

TypeScript æ˜¯ä¸€é—¨ **é™æ€ç±»å‹è¯­è¨€ï¼ˆstatic type systemï¼‰**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š

> æ‰€æœ‰çš„ç±»å‹æ£€æŸ¥ã€æ³›å‹æ¨å¯¼ã€ç±»å‹æ¨ç†ï¼Œ**éƒ½å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼ˆå¼€å‘æ—¶ï¼‰**ï¼Œä¸ä¼šåœ¨è¿è¡Œæ—¶æ‰§è¡Œæˆ–æ¨å¯¼ã€‚

------

### 1.5.2 é‚£ä¸ºä»€ä¹ˆä½ èƒ½åœ¨â€œä½¿ç”¨çš„æ—¶å€™â€æ¨å¯¼å‡ºç±»å‹ï¼Ÿ

å…³é”®æ˜¯ç†è§£è¿™é‡Œçš„â€œä½¿ç”¨â€â€”â€”å¹¶ä¸æ˜¯è¿è¡Œæ—¶è°ƒç”¨ï¼Œè€Œæ˜¯ **â€œä½ åœ¨å†™ä»£ç æ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä½ç½®â€**ã€‚TypeScript ç¼–è¯‘å™¨ä¼šåœ¨é‚£ä¸€åˆ»å‚ä¸ç±»å‹æ¨å¯¼ã€‚

æˆ‘ä»¬æ¥çœ‹è¿™ä¸ªä¾‹å­ï¼š

```ts

type ICallback<T> = (val: T) => void;
type IForeach = <T>(arr: T[], cb: ICallback<T>) => void;

const myForEach: IForeach = (arr, cb) => {
  arr.forEach(cb);
};

myForEach(['a', 'b'], (val) => {
  val.toUpperCase(); // âœ… val è¢«æ¨æ–­ä¸º string
});
```

### åœ¨è¿™è¡Œï¼š

```ts

myForEach(['a', 'b'], (val) => {
```

> TypeScript ç¼–è¯‘å™¨ **åœ¨ç¼–è¯‘æœŸè¯»å–è¿™è¡Œä»£ç **ï¼Œåˆ†æ `arr` æ˜¯ `string[]`ï¼Œäºæ˜¯ï¼š
>
> - æ¨å¯¼å‡º `T = string`
> - ç„¶åå°† `cb` çš„ç±»å‹å˜æˆ `(val: string) => void`
> - æ‰€ä»¥ä½ å†™çš„ `(val) => val.toUpperCase()` è‡ªåŠ¨æ¨å¯¼å‡º `val: string`

------

### ğŸ”¬ æ¨å¯¼æµç¨‹å®é™…ä¸Šæ˜¯ç¼–è¯‘å™¨å†…éƒ¨çš„å¤§è„‘è¿è¡Œï¼š

1. ä½ è°ƒç”¨ `myForEach(arr, cb)`
2. ç¼–è¯‘å™¨çœ‹åˆ°äº†å‡½æ•°ç­¾åï¼š`<T>(arr: T[], cb: (val: T) => void)`
3. å®ƒçœ‹åˆ° `arr = ['a', 'b']` æ¨å¯¼å‡º `T = string`
4. ç„¶åæŠŠ `T = string` åº”ç”¨åˆ° `cb`
5. æ‰€ä»¥ä½ ä¼ çš„ callback `(val) => ...` å°±å˜æˆ `(val: string) => ...`

è¿™ä¸€åˆ‡ï¼Œå…¨éƒ½åœ¨ä½ å†™è¿™è¡Œä»£ç æ—¶å‘ç”Ÿï¼Œå®Œå…¨åœ¨**ç¼–è¯‘æœŸå®Œæˆç±»å‹è®¡ç®—å’Œæ£€æŸ¥**ã€‚

------

### ğŸ§  å…³é”®ç†è§£ï¼š**â€œä½¿ç”¨æ—¶æ¨å¯¼â€ â‰  â€œè¿è¡Œæ—¶æ¨å¯¼â€**

- âœ… æ˜¯çš„ï¼Œæ¨å¯¼å‘ç”Ÿåœ¨â€œä½¿ç”¨æ³›å‹çš„é‚£ä¸€è¡Œä»£ç ä¸Šâ€
- âŒ ä½†ä¸æ˜¯è¯´â€œç­‰åˆ°è¿è¡Œä»£ç æ—¶æ‰æ¨å¯¼â€
- ğŸ”§ å®é™…ä¸Šæ˜¯ç¼–è¯‘å™¨â€œåœ¨é‚£ä¸€è¡Œä»£ç ä¸Šä¸‹æ–‡é‡Œâ€è¿›è¡Œç±»å‹æ¨ç†

------

### ğŸš¨ åè¿‡æ¥éªŒè¯ä¸‹ï¼š

è¿è¡Œæ—¶æ ¹æœ¬æ²¡æœ‰ç±»å‹ä¿¡æ¯ï¼š

```ts

function identity<T>(val: T): T {
  console.log(typeof val); // è¿è¡Œæ—¶çœ‹åˆ°çš„æ˜¯å®é™…å€¼ç±»å‹ï¼Œä¸çŸ¥é“ T æ˜¯ä»€ä¹ˆ
  return val;
}

identity("hello");
```

è¿™é‡Œä½ çœ‹ä¸åˆ° T æ˜¯ `string`ï¼Œä½ åªèƒ½é€šè¿‡ `typeof` çœ‹è§ `"hello"` æ˜¯ `"string"`ï¼Œ**TypeScript çš„ T æ˜¯è·‘ä¸è¿›è¿è¡Œæ—¶çš„ï¼**

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> TypeScript æ‰€æœ‰æ³›å‹æ¨å¯¼è¡Œä¸ºï¼Œ**éƒ½åœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆ**ã€‚ä½ â€œè°ƒç”¨å‡½æ•°æ—¶â€å‘ç”Ÿçš„æ¨å¯¼ï¼Œæ˜¯ç¼–è¯‘å™¨**å¯¹è¿™ä¸€è¡Œä»£ç è¿›è¡Œç±»å‹åˆ†ææ—¶**å®Œæˆçš„ã€‚



ã€Œ**TypeScript ç±»å‹æ¨å¯¼çš„æ—¶é—´è½´**ã€å’Œã€Œæ³›å‹æ¨å¯¼å‘ç”Ÿåœ¨å“ªä¸€åˆ»ã€ã€‚è¿™å¼ å›¾ä¼šå¸®åŠ©ä½ æŠŠâ€œå†™ä»£ç çš„è¿‡ç¨‹â€å’Œâ€œç±»å‹ç³»ç»Ÿçš„åŠ¨ä½œâ€å¯¹åº”èµ·æ¥ğŸ‘‡

------

### 1.5.4ğŸ¯ å›¾è§£ï¼š**TypeScript æ³›å‹ç±»å‹æ¨å¯¼æ—¶é—´çº¿**

```ts

ğŸ§  ç¼–è¯‘å™¨è§†è§’ï¼ˆå…¨åœ¨ç¼–è¯‘æ—¶å®Œæˆï¼‰ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ å†™äº†ä»£ç    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ è°ƒç”¨å‡½æ•°ï¼š               â”‚
â”‚                            â”‚
â”‚   myForEach(['a', 'b'], cb)â”‚
â”‚                            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘å™¨çœ‹åˆ° myForEach çš„ç±»å‹ï¼šâ”‚
â”‚   <T>(arr: T[], cb: (val: T) => void) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘å™¨çœ‹å‚æ•°ï¼š             â”‚
â”‚   arr = ['a', 'b']         â”‚
â”‚   â‡’ æ¨å¯¼å‡º T = string      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘å™¨å°† cb çš„ç±»å‹æ¢æˆï¼š   â”‚
â”‚   (val: string) => void    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘å™¨æ£€æŸ¥ cb å®å‚æ˜¯å¦åˆæ³• â”‚
â”‚   (val) => val.toUpperCase() â”‚
â”‚   âœ”ï¸ val æ˜¯ stringï¼Œok       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

------

### ğŸ§¾ ç„¶åå‘ç”Ÿä»€ä¹ˆï¼Ÿ

### ç¼–è¯‘å™¨ç»“æŸåï¼Œç”Ÿæˆ JavaScript â¬‡ï¸

```ts

function myForEach(arr, cb) {
  for (const e of arr) {
    cb(e); // ğŸ‘ˆ è¿™é‡Œå·²ç»æ²¡æœ‰æ³›å‹ä¿¡æ¯äº†
  }
}
myForEach(['a', 'b'], function(val) {
  console.log(val.toUpperCase());
});
```

**æ‰€æœ‰æ³›å‹ç±»å‹ã€ç±»å‹æ£€æŸ¥ã€ç±»å‹ä¿¡æ¯â€”â€”å…¨éƒ¨æ¶ˆå¤±**ï¼Œè¿è¡Œæ—¶ä»£ç ä¸ä¿ç•™ä»»ä½•ç±»å‹ä¿¡æ¯ã€‚

------

### ğŸ§  æ‰€ä»¥å…³é”®è®°ä½ä¸€å¥ï¼š

> TypeScript çš„ç±»å‹æ¨å¯¼çœ‹èµ·æ¥åƒæ˜¯â€œä½¿ç”¨çš„æ—¶å€™å‘ç”Ÿâ€ï¼Œä½†å®é™…ä¸Šæ˜¯â€œ**ä½ å†™é‚£ä¸€è¡Œä»£ç æ—¶ï¼Œç¼–è¯‘å™¨åœ¨åå°é™é™åˆ†æ**â€ï¼Œä¸€æ—¦ä»£ç ç¼–è¯‘å®Œï¼Œæ‰€æœ‰ç±»å‹ä¿¡æ¯éƒ½ä¼šæ¶ˆå¤±ã€‚

------

### æƒ³äº²çœ¼çœ‹çœ‹ï¼Ÿ

ä½ å¯ä»¥è¯•è¯•è¿™ä¸ª Playground é“¾æ¥ï¼šhttps://tsplay.dev/NJVzxw
ç‚¹å¼€å³ä¸Šè§’çš„ â€œJavaScriptâ€ tabï¼Œä½ å°±ä¼šçœ‹åˆ° **æ²¡æœ‰ä¸€ä¸ª `T` è¢«ä¿ç•™ä¸‹æ¥**ï¼

## 1.6 ç±»å‹å±‚çº§[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-2.html#_12-ç±»å‹å±‚çº§)

> æ ¹æ®ç±»å‹å…¼å®¹æ€§æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š

- **never < å­—é¢é‡ç±»å‹**
- **å­—é¢é‡ç±»å‹ < å­—é¢é‡ç±»å‹çš„è”åˆç±»å‹**
- **åŸå§‹ç±»å‹ < åŸå§‹ç±»å‹çš„è”åˆç±»å‹**
- **åŸå§‹ç±»å‹ < è£…ç®±ç±»å‹ < Object ç±»å‹**
- **Object < any | unknown**

### 1.6.1.unknown & any ç‰¹æ®Šæƒ…å†µ[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-2.html#_12-1-unknown-any-ç‰¹æ®Šæƒ…å†µ)



```ts
type R17 = unknown extends 1 ? true : false; // ä¸èƒ½èµ‹äºˆç»™é™¤unknownä¹‹å¤–çš„ç±»å‹
type R18 = any extends 1 ? true : false; // boolean
type R19 = any extends any ? true : false; // æ¡ä»¶æ˜¯ anyï¼Œä¾ç„¶ä¼šè¿›è¡Œåˆ¤æ–­
type a = unknown extends any ? true : false; // true
type b = any extends unknown ? true : false; // true

// never ä½œä¸ºæ³›å‹ä¼ é€’ï¼Œæ­¤æ—¶åªä¼šè¿”å›never
type d<T> = T extends 1 ? true : false;
type e = d<never> // never
```

> **anyå¯ä»¥åˆ†è§£æˆæ¡ä»¶æ»¡è¶³ã€å’Œä¸æ»¡è¶³ä¸¤éƒ¨åˆ†ï¼Œåˆ™è¿”å›æ¡ä»¶ç±»å‹ç»“æœç»„æˆçš„è”åˆç±»å‹ã€‚ä½†æ˜¯ä¸`any` è¿›è¡Œåˆ¤æ–­æ—¶ä¾ç„¶ä¼šè¿›è¡Œæ­£å¸¸åˆ¤æ–­ã€‚**
>
> **any è‡ªå¸¦åˆ†å‘æœºåˆ¶**
>
> **never ä½œä¸ºæ³›å‹ä¼ é€’ï¼Œæ­¤æ—¶åªä¼šè¿”å›never**

### 1.6.2{} | object | Object ç‰¹æ®Šæƒ…å†µ[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-2.html#_12-2-object-object-ç‰¹æ®Šæƒ…å†µ)



```ts
type R20 = {} extends object ? true : false; // true
type R21 = {} extends Object ? true : false; // true

// é¸­å­ç±»å‹æ£€æµ‹ï¼Œå¯ä»¥çœ‹å‡ºå¯¹è±¡æ˜¯åŸºäº{}æ‰©å±•å‡ºæ¥çš„
type R22 = Object extends {} ? true : false; // true
type R23 = object extends {} ? true : false; // true

// ä»¥ä¸‹ä¸¤ç§æƒ…å†µå‡é»˜è®¤æˆç«‹
type R24 = Object extends object ? true : false; // true
type R25 = object extends Object ? true : false; // true
```



## 1.7æ¡ä»¶ç±»å‹åˆ†å‘[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-3.html#_1-æ¡ä»¶ç±»å‹åˆ†å‘)

### 1.7.1å‡ºç°æ¡ä»¶åˆ†å‘çš„åœºæ™¯ï¼š[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-3.html#_1-1-å‡ºç°æ¡ä»¶åˆ†å‘çš„åœºæ™¯ï¼š)

- ç±»å‹å‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªè”åˆç±»å‹ã€‚
- ç±»å‹å‚æ•°éœ€è¦é€šè¿‡æ³›å‹å‚æ•°çš„æ–¹å¼ä¼ å…¥
- æ¡ä»¶ç±»å‹ä¸­çš„æ³›å‹å‚æ•°æ˜¯å¦å®Œå…¨è£¸éœ²ï¼Œåªæœ‰è£¸ç±»å‹æ‰å¯ä»¥è¢«åˆ†å‘ã€‚



```ts
type Condition1 = Fish | Bird extends Fish ? Water : Sky; // sky
type Condition2<T> = T extends Fish ? Water : Sky;
type R1 = Condition2<Fish | Bird>; // water | sky
```

> è¿™é‡Œä¼šç”¨æ¯ä¸€é¡¹ä¾æ¬¡è¿›è¡Œåˆ†å‘,æœ€ç»ˆé‡‡ç”¨è”åˆç±»å‹ä½œä¸ºç»“æœ,ç­‰ä»·äº:



```ts
type c1 = Condition2<Fish>;
type c2 = Condition2<Bird>;
type c = c1 | c2;
```

### 1.7.2ç¦ç”¨åˆ†å‘[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-3.html#_1-2-ç¦ç”¨åˆ†å‘)

```ts
// type unionAssets<T, U> = T extends U ? true : false;
type R1 = unionAssets<1 | 2, 1 | 2 | 3>; // true çœ‹ä¼¼æ­£å¸¸
type R2 = unionAssets<1 | 2, 1>; // boolean (å¼€å¯åˆ†å‘ç±»å‹ç»“æœä¸ºboolean)

// ç¦ç”¨åˆ†å‘
type unionAssets<T, U> = [T] extends [U] ? true : false;
type NoDistribute<T> = T & {}; // è¿™ç§æƒ…å†µä¼šè¿”å›ä¸€ä¸ªæ–°ç±»å‹ï¼Œä»è€Œé˜»æ­¢åˆ†å‘
type unionAssets<T, U> = NoDistribute<T> extends U ? true : false;
```

### 1.7.3 ç‰¹æ®Šé—®é¢˜[#](http://www.zhufengpeixun.com/ts-lesson/guide/typescript-3.html#_1-3-ç‰¹æ®Šé—®é¢˜)

é€šè¿‡æ³›å‹ä¼ å…¥çš„å‚æ•°ä¸º neverï¼Œåˆ™ä¼šç›´æ¥è¿”å› neverã€‚

```ts
type isNever1<T> = T extends never ? true : false;
type isNever2<T> = [T] extends [never] ? true : false; // åŒ…è£¹åä¸åœ¨æ˜¯never
type R4 = isNever1<never>; // è¿”å›never
type R5 = isNever2<never>; // è¿”å›true
```

## 1.8 å‡½æ•°çš„é€†å˜ä¸åå˜

> å‡½æ•°çš„å‚æ•°æ˜¯é€†å˜çš„ï¼Œè¿”å›å€¼æ˜¯åå˜çš„ ï¼ˆåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ StrictFunctionTypes:false å‡½æ•°çš„å‚æ•°æ˜¯åŒå‘åå˜çš„ï¼‰



```ts
class Parent {
  house() {}
}
class Child extends Parent {
  car() {}
}
class Grandson extends Child {
  sleep() {}
}
function fn(callback: (instance: Child) => Child) {
  // åœ¨ä½¿ç”¨æ­¤å›è°ƒæ–¹æ³•æ—¶å¯ä»¥ä¼ é€’ è‡ªå·±ã€æˆ–è€…å­ç±»å‹
  callback(new Child());
  let ins = callback(new Grandson()); // å¦‚æœä¼ é€’çš„æ˜¯å­ç±»å‹ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™æ— æ³•ä½¿ç”¨å¤šå‡ºæ¥çš„å±æ€§
  // insæ˜¯Childç±»å‹ï¼Œæˆ‘å¯ä»¥å°†Grandsonç±»å‹ä¼ å…¥ã€‚ç”¨çš„æ—¶å€™æˆ‘åªä¼šè°ƒç”¨Childç±»å‹çš„æ–¹æ³•ã€‚å› ä¸ºå®‰å…¨æ‰€ä»¥å…¼å®¹
}
fn((instance: Parent) => {
  // instance.sleep() è¿™ä¸ªä¸å®‰å…¨ã€‚å› ä¸ºå¦‚æœä¼ é€’çš„æ˜¯Child ä»–ä¸å…·å¤‡ã€‚
  // ä½†æ˜¯å¦‚æœè¿™é‡Œæ ‡è¯†Parent æ˜¯å¯ä»¥çš„ã€‚å› ä¸ºè°ƒç”¨instance.house() æ˜¯å®‰å…¨çš„ã€‚
  return new Grandson();
});
```

> **é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹å¯ä»¥è¯´æ˜ï¼Œå‡½æ•°ç­¾åç±»å‹ä¸­å‚æ•°æ˜¯é€†å˜çš„ï¼Œè¿”å›å€¼å¯ä»¥è¿”å›å­ç±»å‹æ‰€ä»¥ç§°ä¹‹ä¸ºåå˜çš„ã€‚éšç€æŸä¸€ä¸ªé‡çš„å˜åŒ–è€Œå˜åŒ–ä¸€è‡´çš„å³ç§°ä¸ºåå˜ï¼Œè€Œå˜åŒ–ç›¸åçš„å³ç§°ä¸ºé€†å˜ã€‚ä½†æ˜¯å‚æ•°é€†å˜ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚**

**ç”±æ­¤å¯å¾—:**



```ts
type Arg<T> = (arg: T) => void;
type Return<T> = (arg: any) => T;
type ArgReturn = Arg<Parent> extends Arg<Child> ? true : false; // åŸºäºå‡½æ•°å‚æ•°çš„é€†å˜
type ReturnReturn = Return<Grandson> extends Return<Child> ? true : false; // è¿”å›å€¼æ˜¯åå˜çš„
```

**é€†å˜å¸¦æ¥çš„é—®é¢˜:**

```ts
// é€†å˜å¸¦æ¥çš„é—®é¢˜ï¼ˆæˆ‘ä»¬å†™ä¸šåŠ¡çš„æ—¶å€™ è¿˜æ˜¯è¦æ­£å¸¸å¼€å¯é€†å˜ï¼‰
interface MyArray<T> {
  concat: (...args: T[]) => T[];
}
// parent: (...args: Parent[]) => Parent[];
// child:  (...args: Child[]) => Child[];
// å°†child èµ‹äºˆç»™parent   ä¼ çˆ¶è¿”å„¿å­
let parentArr!: MyArray<Parent>;
let childArr!: MyArray<Child>;

// chilldArr èƒ½ä¸èƒ½èµ‹äºˆç»™ parentArr

// [{car(){}}] = [{car(){},house(){}}]

parentArr = childArr; // æŠ¥é”™
```



```ts
interface Array<T> {
  // concat: (...args: T[]) => T[]; // ä¸¥æ ¼æ£€å‚æ•°æµ‹é€† Child æ— æ³• èµ‹äºˆç»™ Parent
  concat(...args: T[]): T[]; // ä¸è¿›è¡Œå‚æ•°é€†å˜æ£€æµ‹
  [key: number]: T;
}
let parentArr!: Array<Parent>;
let childArr!: Array<Child>;

parentArr = childArr; // å­åº”è¯¥å¯ä»¥èµ‹äºˆç»™çˆ¶çš„~~~
```

## 1.9 å¯¹è±¡çš„äº¤å‰é›†åˆ

```ts
type T1 = {
  name: "ac";
  age: number;
  address: string;
};
type T2 = {
  name: string;
  gender: number;
  address: number;
};
// å¯¹è±¡æ±‚äº¤é›†
type ObjectInter<T extends object, K extends object> = Pick<
  T,
  keyof T & keyof K
>;
type X1 = ObjectInter<T1, T2>;

// å¯¹è±¡æ±‚å·®
// Omit + Extract ==  Pick exclude
type ObjectDiff<T extends object, K extends object> = Omit<T, keyof K>;
type X2 = ObjectDiff<T1, T2>;

// ä¸¤ä¸ªç±»å‹åˆå¹¶åœ¨ä¸€èµ·ï¼Œå¦‚æœéƒ½æœ‰çš„å±æ€§ ç”¨T2çš„ ï¼Ÿ {...T1,...T2}

// T1  - T2  + T2 - T1 + T2 & T1

type OverWrite<T extends object, K extends object> = ObjectDiff<T, K> &
  ObjectDiff<K, T> &
  ObjectInter<K, T>;
type X3 = Compute<OverWrite<T1, T2>>;

// merge ç±»å‹ä¼šåˆå¹¶åœ¨ä¸€èµ·
type MergeType<T, U> = {
  [K in keyof T]: K extends keyof U ? T[K] | U[K] : T[K];
};
// æ±‚å·®é›†  + å…¶ä»–çš„å±æ€§äº¤é›†çš„éƒ¨åˆ†è”åˆåœ¨ä¸€èµ·å³å¯
type MergeWrite<T extends object, K extends object> = ObjectDiff<K, T> &
  MergeType<T, K>;
type X4 = Compute<MergeWrite<T1, T2>>;

```

